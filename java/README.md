# swag-webhook-events

RBKmoney Webhooks Events API
- API version: 1.0
  - Build date: 2019-06-05T14:43:15.170+03:00[Europe/Moscow]

 ## Webhooks Events API  Данная спецификация определяет протокол доставки оповещений о возникновении новых событий в рамках вашей организации, которые платформа доставляет в виде HTTP-запросов на URL-адреса созданных вами webhook'ов. Обработчики для подобного рода запросов необходимо реализовать на стороне вашего серверного кода согласно данной спецификации.  Webhook — это подписка на определенный тип события либо их группу, касающихся различных объектов в рамках вашей организации. Для управления webhook'ами используются методы RBKmoney API, описанные в спецификации [RBKmoney Webhooks Management API](https://rbkmoney.github.io/api#Webhooks). Когда наступает одно из событий в рамках определенного инвойса (например, изменение статуса инвойса или платежа по этому инвойсу), платформа выбирает webhook, подходящий под этот тип события, и отправляет HTTP-запрос, содержащий сообщение в формате JSON на указанный в этом webhook'е URL. Если вы создали несколько webhook'ов, подходящих под этот тип события, то событие доставляется одновременно на все заданные в них URL в неопределённом порядке.  ## Стратегия доставки  Платформа гарантирует порядок доставки событий в рамках определенного инвойса, никакое событие не может быть пропущено и доставлено не в порядке возникновения в платформе. Платформа поддерживает очередь сообщений для каждого инвойса для того, чтобы соблюсти эти гарантии.  Запрос на доставку считается успешным только при получении ответа со статусом `200`. Платформа будет ожидать успешного ответа на отправленный запрос в течение 10 секунд. В случае ответа любым другим статусом или по истечении указанного времени, отведённого на обработку оповещения, платформа будет пытаться повторно доставить оповещения до получения успешного ответа, либо до принятия решения о невозможности доставить информацию. Попытки доставки будут производиться со следующими временными интервалами между запросами:    - 30 секунд,   - 5 минут,   - 15 минут,   - 1 час.   - каждый час в течение суток (24 часа)  Если последняя попытка доставить оповещение оканчивается неудачей, все события, которые накопились в очереди этого инвойса, отбрасываются.  ## Авторизация полученных сообщений  Платформа подтверждает подлинность оповещений, подписывая сообщения приватным ключом, уникальным для каждого webhook'а, парный публичный ключ к которому содержится в данных этого webhook'а. Подпись передается в HTTP-заголовке `Content-Signature`. В заголовке в виде различных атрибутов содержится информация об использованном при формировании подписи алгоритме и значение подписи в формате [URL-safe base-64](https://tools.ietf.org/html/rfc4648).  ``` Content-Signature: alg=RS256; digest=zFuf7bRH4RHwyktaqHQwmX5rn3LfSb4dKo... ```  На данный момент возможно использование единственного алоритма формирования подписи.  ### [RS256](https://tools.ietf.org/html/rfc7518#section-3.3)  Подпись формируется согласно алгоритму [RSASSA-PKCS1-v1_5](https://tools.ietf.org/html/rfc3447#section-8.2), на вход которому подаётся результат вычисления хэша сообщения по алгоритму [SHA-256](https://tools.ietf.org/html/rfc6234).  Набор атрибутов заголовка и список возможных алгоритмов формирования подписи в дальнейшем могут быть расширены. 

  For more information, please visit [https://api.rbk.money](https://api.rbk.money)

*Automatically generated by the [Swagger Codegen](https://github.com/swagger-api/swagger-codegen)*


## Requirements

Building the API client library requires:
1. Java 1.7+
2. Maven/Gradle

## Installation

To install the API client library to your local Maven repository, simply execute:

```shell
mvn clean install
```

To deploy it to a remote Maven repository instead, configure the settings of the repository and execute:

```shell
mvn clean deploy
```

Refer to the [OSSRH Guide](http://central.sonatype.org/pages/ossrh-guide.html) for more information.

### Maven users

Add this dependency to your project's POM:

```xml
<dependency>
  <groupId>com.rbkmoney</groupId>
  <artifactId>swag-webhook-events</artifactId>
  <version>1.0.9-SNAPSHOT</version>
  <scope>compile</scope>
</dependency>
```

### Gradle users

Add this dependency to your project's build file:

```groovy
compile "com.rbkmoney:swag-webhook-events:1.0.9-SNAPSHOT"
```

### Others

At first generate the JAR by executing:

```shell
mvn clean package
```

Then manually install the following JARs:

* `target/swag-webhook-events-1.0.9-SNAPSHOT.jar`
* `target/lib/*.jar`

## Getting Started

Please follow the [installation](#installation) instruction and execute the following Java code:

```java
import com.rbkmoney.*;
import com.rbkmoney.auth.*;
import com.rbkmoney.swag_webhook_events.*;
import com.rbkmoney.swag_webhook_events.EventNotificationsApi;

import java.io.File;
import java.util.*;

public class EventNotificationsApiExample {

    public static void main(String[] args) {
        
        EventNotificationsApi apiInstance = new EventNotificationsApi();
        Event body = new Event(); // Event | Данные произошедшего в платформе события
        String contentSignature = "contentSignature_example"; // String | Подпись сообщения, сформированная согласно указанным выше правилам 
        try {
            apiInstance.notifyWebhookEvent(body, contentSignature);
        } catch (ApiException e) {
            System.err.println("Exception when calling EventNotificationsApi#notifyWebhookEvent");
            e.printStackTrace();
        }
    }
}
```

## Documentation for API Endpoints

All URIs are relative to */*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*EventNotificationsApi* | [**notifyWebhookEvent**](docs/EventNotificationsApi.md#notifyWebhookEvent) | **POST** /webhook-url | Оповестить о событии

## Documentation for Models

 - [BankCardDetails](docs/BankCardDetails.md)
 - [ClientInfo](docs/ClientInfo.md)
 - [ContactInfo](docs/ContactInfo.md)
 - [CryptoCurrency](docs/CryptoCurrency.md)
 - [CryptoWalletDetails](docs/CryptoWalletDetails.md)
 - [Customer](docs/Customer.md)
 - [CustomerBinding](docs/CustomerBinding.md)
 - [CustomerBindingError](docs/CustomerBindingError.md)
 - [CustomerBindingFailed](docs/CustomerBindingFailed.md)
 - [CustomerBindingStarted](docs/CustomerBindingStarted.md)
 - [CustomerBindingStatus](docs/CustomerBindingStatus.md)
 - [CustomerBindingSucceeded](docs/CustomerBindingSucceeded.md)
 - [CustomerCreated](docs/CustomerCreated.md)
 - [CustomerDeleted](docs/CustomerDeleted.md)
 - [CustomerPayer](docs/CustomerPayer.md)
 - [CustomerReady](docs/CustomerReady.md)
 - [DigitalWalletDetails](docs/DigitalWalletDetails.md)
 - [DigitalWalletDetailsQIWI](docs/DigitalWalletDetailsQIWI.md)
 - [Event](docs/Event.md)
 - [Invoice](docs/Invoice.md)
 - [InvoiceCancelled](docs/InvoiceCancelled.md)
 - [InvoiceCartLine](docs/InvoiceCartLine.md)
 - [InvoiceCreated](docs/InvoiceCreated.md)
 - [InvoiceFulfilled](docs/InvoiceFulfilled.md)
 - [InvoicePaid](docs/InvoicePaid.md)
 - [Payer](docs/Payer.md)
 - [Payment](docs/Payment.md)
 - [PaymentCancelled](docs/PaymentCancelled.md)
 - [PaymentCaptured](docs/PaymentCaptured.md)
 - [PaymentError](docs/PaymentError.md)
 - [PaymentFailed](docs/PaymentFailed.md)
 - [PaymentProcessed](docs/PaymentProcessed.md)
 - [PaymentRecurrentParent](docs/PaymentRecurrentParent.md)
 - [PaymentRefunded](docs/PaymentRefunded.md)
 - [PaymentResource](docs/PaymentResource.md)
 - [PaymentResourcePayer](docs/PaymentResourcePayer.md)
 - [PaymentStarted](docs/PaymentStarted.md)
 - [PaymentTerminalDetails](docs/PaymentTerminalDetails.md)
 - [PaymentToolDetails](docs/PaymentToolDetails.md)
 - [PaymentToolDetailsBankCard](docs/PaymentToolDetailsBankCard.md)
 - [PaymentToolDetailsCryptoWallet](docs/PaymentToolDetailsCryptoWallet.md)
 - [PaymentToolDetailsDigitalWallet](docs/PaymentToolDetailsDigitalWallet.md)
 - [PaymentToolDetailsPaymentTerminal](docs/PaymentToolDetailsPaymentTerminal.md)
 - [RecurrentPayer](docs/RecurrentPayer.md)
 - [Refund](docs/Refund.md)
 - [RefundCreated](docs/RefundCreated.md)
 - [RefundFailed](docs/RefundFailed.md)
 - [RefundPending](docs/RefundPending.md)
 - [RefundSucceeded](docs/RefundSucceeded.md)
 - [SubError](docs/SubError.md)

## Documentation for Authorization

All endpoints do not require authorization.
Authentication schemes defined for the API:

## Recommendation

It's recommended to create an instance of `ApiClient` per thread in a multithreaded environment to avoid any potential issues.

## Author

tech-support@rbkmoney.com
